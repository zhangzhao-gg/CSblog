9.16号，是顶峰数藏平台上线的第一天。这一天也是我女朋友生日。
我正带着女朋友在面馆吃面条呢，华顶峰一个电话打过来，说网站崩了，让我快来解决。

问题很简单：
当天做了一个赠送活动，引入大量用户进来白嫖藏品。短期内用户数量太高，导致网站卡慢，最后卡死。
心里想到最严重的问题：需要检查是否存在藏品被发送失败等出现藏品不一致的问题。我检查了日志与数据库，确定应该不存在该问题。
于是开始排查其他问题，检查了CPU与占用率还有带宽占用。

网络带宽占用已经跑满了，我们是单体应用，就在一个服务器上部署了前后端。没有用对象存储，所以图片都要走前端，导致带宽很容易跑满。

解决方案：
1目前成本最低的方法就是买CDN套餐，CDN可以把前端需要调用的静态文件全部走各地的缓存服务器，大大减少了我们前端的压力（快速简单）
2可以的话，立刻进行对象存储，把所有的图片都存储到对象存储上（需要研发成本，但也比较快）
3前后端分离部署到2台服务器上，进行一下流量分流。（快速简单）
4项目稳定下来之后，对项目2进行进行分布式拆分，方便扩展服务器。（对项目修改较大，建议在项目立项前期就进行分布式开发，减少开发成本）

思考：今后所有存在抢购或者会存在业务较为复杂的项目时，就采用分布式项目架构开发。方便部署的时候减少成本